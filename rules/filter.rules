#-*- mode:snakemake -*-
import os

FILTER_INTERIM = join(INTERIM_DIR, 'smallrna', 'filtered')
FILTER_PROCESSED = join(PROCESSED_DIR, 'smallrna', 'filtered')
FASTQ_DIR = config.get('fastq_dir', 'data/raw/fastq')

extra_conf_fn = srcdir('filter.config')
if os.path.exists(extra_conf_fn):
    with open(extra_conf_fn) as fh:
        c  = yaml.load(fh) or {}
        update_config2(config, c)

def _filter_get_raw(wildcards):
    return join(FASTQ_DIR, config['samples'][wildcards.sample]['R1'])
       
include:
    'filter/cliptrim.rules'
include:
    'filter/calibrators.rules'
include:
    'filter/contaminants.rules'
include:
    'filter/rrna.rules'


def get_filtered_fastq(wildcards):
    return _filter_clean_fastq(wildcards)

rule filter_summary:
